<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>注册_华为帐号</title>
    <link rel="stylesheet" href="style/reset.css">
    <link rel="stylesheet" href="style/registerstyle.css">
</head>
<body>
    <div id="topout">
        <h1>
            <img src="https://hwid1.vmallres.com/CAS/up/rss_18/logos/head-top.png" alt="logo">
            <span id="v_line">丨</span>
            <span id="hw_name">华为商城</span>
        </h1>
    </div> 
    <div id="mainout">
        <div id="main">
            <div id="main_top" class="clear">
                <a href="#" id="phone_ico" class="main_left">
                    <img src="images/phone.png" alt="phone">
                    <span>手机号</span>   
                </a>
                <a  href="#" class="main_left">
                    <img src="images/mail.png" alt="mail">
                    <span>电子邮箱</span>
                </a>
                <span class="mainright">
                    已有华为帐号
                    <a href="login.html">登录></a>
                </span>
            </div>
            <div id="main_mid">
                <div class="mid_items clear" id="country">
                    <div class="mid_left">国家/地区</div>
                    <div class="mid_right clear">
                        <span id="chose_country">中国</span>
                        <img class="choose_triangle" src="https://hwid1.vmallres.com/CAS/up/rss_18/css/common/images/triangle_gray.png" alt="country_choose">
                    </div>
                </div>
                <div class="mid_items clear" id="phone">
                    <div class="mid_left">
                        <span>+86(中国)</span>
                        <img class="choose_triangle" src="https://hwid1.vmallres.com/CAS/up/rss_18/css/common/images/triangle_gray.png" alt="country_choose">                        
                    </div>
                    <div class="mid_right clear">
                        <input type="text" name="phone_number" id="phone_number" placeholder="请输入手机号">
                        <p class="error_input">手机号不正确</p>
                    </div>
                </div>
                <div class="mid_items clear" id="photo_yzm">
                    <div class="mid_left">
                        <span>图形验证码</span>
                    </div> 
                    <div class="mid_right clear">
                        <input type="text" name="photo_yzm_number" id="photo_yzm_number" placeholder="请输入图形验证码">
                        <a href="#">
                            <img src="https://hwid1.vmall.com/Captcha/authCodeImage?session_code_key=p_reg_login_websso_session_ramdom_code_key" alt="photo_yzm">                                
                        </a>
                    </div>
                </div>
                <div class="mid_items clear" id="phone_yzm">
                        <div class="mid_left">
                            <span>短信验证码</span>
                        </div>
                        <div class="mid_right clear">
                            <input type="text" name="phone_yzm_number" id="phone_yzm_number" placeholder="请输入短信验证码">
                            <a href="#">获取验证码</a>                            
                        </div>
                </div>
                <div class="mid_items clear" id="password">
                        <div class="mid_left">
                            <span>密码</span>
                        </div>
                        <div class="mid_right clear">
                            <input type="password" name="password" id="password_number" placeholder="请输入密码">
                        </div>
                        
                </div>
                <p class="error_input_pas" id="pasless8">至少包含8个字符</p> 
                <p class="error_input_pas" id="pashasspace">不能包含空格</p>                
                <p class="error_input_pas" id="pasless2">至少包含字母、数字、符号中的2种</p>
                
                <div class="mid_items clear" id="sec_password">
                        <div class="mid_left">
                            <span>确认密码</span> 
                        </div>
                        <div class="mid_right clear">
                            <input type="password" name="sec_password" id="sec_password_number" placeholder="请再次输入密码">
                        </div>
                </div>
                <p class="error_input_pas" id="sec_check">密码与确认密码不一致</p> 
                <div id="reg_btn">
                    <input type="submit" class="aa" id="sub_btn" value="注册" >
                </div>
            </div>
            <div id="add"></div>
        </div>
    </div>
    
    <div id="footout">
        <div id="foot">
            <p><a href="#">华为帐号用户协议</a>
                <span class="v-linedown">丨</span>
                <a href="#">关于华为帐号与隐私的声明</a>
                <span class="v-linedown">丨</span>
                <a href="#">常见问题</a>
            </p>
            <p>
                Copyright&nbsp;©&nbsp;2011-2018&nbsp;&nbsp;华为软件技术有限公司&nbsp;&nbsp;版权所有&nbsp;&nbsp;保留一切权利&nbsp;&nbsp;苏B2-20070200号&nbsp;|&nbsp;苏ICP备09062682号-9&nbsp;
            </p>
        </div>
    </div>  
</body> 
<script src="libs/jquery-3.3.1.js"></script>
<script> 
    $(function(){
        // var phoneNum = $("#phone_number").val(); 
        // var reg = /^((13[0-9])|(14[5|7])|(15([0-3]|[5-9]))|(18[0,5-9]))\d{8}$/;
        // console.log(reg.test(phoneNum));
        // phoneNum.test(reg)  
        var phone_check =  false;
        var password_check = false;
        var regbig8 = false;
        var regmore2 = false;
        var reghas = false;
        var isshow = false;
        var sec_password_check = false;
        $("#phone_number").on("blur",function(){
            
            var phoneNum = $("#phone_number").val(); 
            var reg = /^((13[0-9])|(14[5|7])|(15([0-3]|[5-9]))|(18[0,5-9]))\d{8}$/;
            if(!reg.test(phoneNum)){
                // alert(1);
                $(".error_input").css("display","block");
                $("#phone").css("border","1px red solid")
            }else{
                $(".error_input").css("display","none");
                $("#phone").css("border","1px #d9d9d9 solid");
                phone_check =true;
            }
            // console.log(phone_check);
        })
        $("#password_number").on("blur",function(){
            var isshow = false;
            var pasNum = $("#password_number").val(); 
            var reg1 = /^.{8,16}$/;//任意8-16位；
            var reg2 = /^\w*[^\s]+\w*$/;//除了空格
            var reg3 = /^((\w*)[0-9]+[a-zA-Z]+|(\w*)[a-zA-Z]+[0-9]+|(\w*)[a-zA-Z]+_+|(\w*)_+[a-zA-Z]+|(\w*)[0-9]+_+|(\w*)_+[0-9]+)$/;//数字字母下划线中的任意两个以上

            if(reg1.test(pasNum)&&reg2.test(pasNum)&&reg3.test(pasNum)){
                $("#pasless8").css("display","none");
                $("#pashasspace").css("display","none");
                $("#pasless2").css("display","none");
                $("#password").css("border","1px #d9d9d9 solid");
                // alert("nb")
                password_check = true;
            }
            else if(!reg1.test(pasNum)&&!isshow){
                $("#pasless8").css("display","block");
                $("#pashasspace").css("display","none");
                $("#pasless2").css("display","none");
                $("#password").css("border","1px red solid") 
                isshow = true;
                // alert("8-16")
            }
            else if(!reg2.test(pasNum)&&!isshow){
                $("#pashasspace").css("display","block");
                $("#pasless8").css("display","none");
                $("#pasless2").css("display","none");
                $("#password").css("border","1px red solid");
                // alert("space");
                isshow = true;
            }
            else if(!reg3.test(pasNum)&&!isshow){
                $("#pasless8").css("display","none");
                $("#pashasspace").css("display","none");
                $("#pasless2").css("display","block");                      
                $("#password").css("border","1px red solid");
                // alert("<2")
                isshow = true;
            }

            // if(!reg1.test(pasNum)){
            //     // alert(1);
            //     $("#pasless8").css("display","block");
            //     $("#password").css("border","1px red solid") 
            // }else{
            //     // alert(">8");
            //     $("#pasless8").css("display","none");
            //     $("#password").css("border","1px #d9d9d9 solid");
            //     regbig8 = true;
            // }  
            // if(reg2.test(pasNum)){
            //      alert(true)
            // }else{   
            //    alert(false)
            // } 
            // if(reg3.test(pasNum)){ 
            //     alert(true)
            // }else{ 
            //     alert(false)
            // }
        })

        $("#sec_password_number").on("blur",function(){
            var pasNum = $("#password_number").val(); 
            var secpasNum = $("#sec_password_number").val();
            if(pasNum==secpasNum){

                $("#sec_password").css("border","1px #d9d9d9 solid");
                $("#sec_check").css("display","none");
                sec_password_check =true;
            }else{
                $("#sec_password").css("border","1px red solid");             
                $("#sec_check").css("display","block");   
            }
        })
// document.body.onclick = function(){
//     console.log(phone_check,password_check,sec_password_check)
// }
          
          
          
        
        $(".aa").on("click",function(){ 
           
            if(sec_password_check&&password_check&&phone_check){
            // if(true){
                var phoneNum = $("#phone_number").val();   

                // console.log(reg.test(phoneNum));
                var pwd = $("#password_number").val();
                // console.log(phoneNum,pwd)
                 
                var opt = { 
                    url:"http://localhost/dist/php/user.php",
                    type:"POST",
                    data:{phoneNum:phoneNum,password:pwd,type:this.id}
                }
                $.ajax(opt) 
                .then(function(res){
                    // console.log(res);
                    alert(res);
                    // alert("注册成功");
                    location.reload();
                })
                
            }
    })
        
        
    })
</script>
</html>


